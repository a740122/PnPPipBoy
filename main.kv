#:import KIVY_DEFAULT_FONT settings.KIVY_DEFAULT_FONT
#:import EffectWidget effectwidget
#:import resource_add_path kivy.resources

<PipLabel>:  
    font_name: KIVY_DEFAULT_FONT
    font_size: 24
    color:[0, 1, 0, 1]
    text_size: self.size
    halign:'center'
    valign:'middle'
    canvas.before:
        Color:
            rgba: 0,0.098,0,1
        Rectangle:
            pos: self.pos
            size: self.size
    #background_color:1,1,1,1

<MyEffect>:
    width: root.width
    height: root.height

# <Label>:
#     font_name: KIVY_DEFAULT_FONT
#     font_size: 24
#     color:[0, 1, 0, 1]
#     text_size: self.size
#     halign:'center'
#     valign:'middle'
#     background_normal:''
#     background_color:1,1,1,1


<PipButton>:  
    font_name: KIVY_DEFAULT_FONT
    font_size: 24
    color:[0, 1, 0, 1]
    # background_color:0,0.1,0,1
    text_size: self.size
    halign:'center'
    valign:'middle'

<PipToggleButton>:  
    font_name: KIVY_DEFAULT_FONT
    font_size: 24
    color:[0, 1, 0, 1]
    # background_color:0,0.1,0,1
    text_size: self.size
    halign:'center'
    valign:'middle'

<PipTextInput>:
    font_name: KIVY_DEFAULT_FONT
    multiline:False
    color:[0, 1, 0, 1]

<TextInput>:
    font_name: KIVY_DEFAULT_FONT
    # background_color:0,0.1,0,1
    multiline:False
    color:[0, 1, 0, 1]

<TabbedPanelHeader>:
    font_name: KIVY_DEFAULT_FONT
    font_size: 19
    # background_color:0,0.1,0,1

<TabbedPanel>:
    # background_color:0,0.1,0,1

<TabbedPanelItem>:
    # background_color:0,0.1,0,1
    color:[0, 1, 0, 1]

<RootWidget>:
    # background_color:0,0.1,0,1
    # effects: EffectWidget.HorizontalBlurEffect(size=1.5), EffectWidget.VerticalBlurEffect(size=1.5),EffectWidget.ScanlinesEffect()
    FloatLayout:
        on_touch_down:
            root.setEquipped(WeaponInventory)
            root.setEquipped(ApparelInventory)
            root.setEquipped(AidInventory)
            root.setEquipped(MiscInventory)
            root.setEquipped(AmmoInventory)
            root.saveCharacter()
            root.playerCharacter.update()
            CarryWeight.updateLabel(root,'CarryWeight',root.playerCharacter.carryWeight)
        canvas.before:
            Color:
                rgba: 0,0.098,0,1
            Rectangle:
                pos: self.pos
                size: self.size
        ScreenManager:
            Screen:
                name:'Intro'
                
                GridLayout:
                    cols:1
                    rows:2
                    row_force_default:True
                    row_default_height:100
                    spacing:10
                    BoxLayout:
                        size:root.width,100
                        PipButton:
                            text:'Load Character'
                            on_release:
                                root.children[0].children[0].current='PipBoy'
                    BoxLayout:
                        size:root.width,100
                        PipButton:
                            text:'New Character'
                            on_release:
                                root.children[0].children[0].current='characterCreation'
                                root.playerCharacter.traits=[]
                                root.playerCharacter.inventory=[]
                                root.playerCharacter.EXP=0
                                root.saveCharacter()
                    BoxLayout:
                        size:root.width,100
                        PipButton:
                            text:'Open Settings'
                            on_release:app.open_settings()
            Screen:
                name:'characterCreation'
                on_enter:
                    PlayerTraits.populate(root)
                
                TabbedPanel:
                    do_default_tab: False

                    TabbedPanelItem:
                        text:'Character'
                        ScrollView:
                            size_hint:None,None
                            size:root.width,root.height*0.9
                            StackLayout:
                                size_hint:1,None
                                height:1500
                                SPECIALrow:
                                    size_hint:1,0.08
                                    PipLabel:
                                        size:0.333,1
                                        text:'Name'
                                    characterDetailsInput:
                                        id: charName
                                        multiline: False
                                        text:self.getText(root,0)

                                SPECIALrow:
                                    size_hint:1,0.08
                                    PipLabel:
                                        size:0.333,1
                                        text:'Age'
                                    characterDetailsInput:
                                        id: charAge
                                        multiline: False
                                        text:self.getText(root,1)

                                SPECIALrow:
                                    size_hint:1,0.08
                                    PipLabel:
                                        size:0.333,1
                                        text:'Race'
                                    characterDetailsInput:
                                        id: charRace
                                        multiline: False
                                        text:self.getText(root,2)

                                SPECIALrow:
                                    size_hint:1,0.08
                                    PipLabel:
                                        text:'Gender'
                                    characterDetailsInput:
                                        id: charGender
                                        multiline: False
                                        text:self.getText(root,3)

                                SPECIALrow:
                                    size_hint:1,0.08
                                    PipLabel:
                                        text:'Karma'
                                    characterDetailsInput:
                                        id: charKarma
                                        hint_text:'-500 to 500'
                                        multiline: False
                                        text:self.getText(root,4)

                                SPECIALrow:
                                    size_hint:1,0.3
                                    PipLabel:
                                        text:'Notes'
                                    characterDetailsInput:
                                        id:charNotes
                                        hint_text:'Appearance/history...'
                                        multiline:True
                                        text:self.getText(root,5)

                                SPECIALrow:
                                    size_hint:1,0.1
                                    PipButton:
                                        text:'Save These Details'
                                        on_press:
                                            charName.updateText(root,0)
                                            charAge.updateText(root,1)
                                            charRace.updateText(root,2)
                                            charGender.updateText(root,3)
                                            charKarma.updateText(root,4)
                                            charNotes.updateText(root,5)
                                            root.playerCharacter.update()

                    TabbedPanelItem:
                        text:'SPECIAL'
                        StackLayout:
                            SPECIALrow:
                                size_hint:1,0.125
                                PipLabel:
                                    id:SPECIALpoints
                                    text:'Special Points Remaining: {}'.format(root.playerCharacter.SPECIALpoints)
                            SPECIALrow:
                                size_hint:1,0.125
                                Label:
                                    text:''
                                StatLabel:
                                    text:'Strength'
                                Label:
                                    text:''
                                PipButton:
                                    text:'<'
                                    on_press: 
                                        ST.incrment(root,-1)
                                        ST.updateNum(root,0)
                                        SPECIALpoints.text='Special Points Remaining: {}'.format(root.playerCharacter.SPECIALpoints)

                                numLabel:
                                    text:'{}'.format(self.getNum(root,0))
                                    id: ST
                                PipButton:
                                    text:'>'
                                    on_press: 
                                        ST.incrment(root,1)
                                        ST.updateNum(root,0)
                                        SPECIALpoints.text='Special Points Remaining: {}'.format(root.playerCharacter.SPECIALpoints)

                                Label:
                                    text:''
                            
                            
                            SPECIALrow:
                                size_hint:1,0.125
                                Label:
                                    text:''
                                StatLabel:
                                    text:'Perception'
                                Label:
                                    text:''
                                PipButton:
                                    text:'<'
                                    on_press: 
                                        PE.incrment(root,-1)
                                        PE.updateNum(root,1)
                                        SPECIALpoints.text='Special Points Remaining: {}'.format(root.playerCharacter.SPECIALpoints)

                                numLabel:
                                    text:'{}'.format(self.getNum(root,1))
                                    id: PE
                                PipButton:
                                    text:'>'
                                    on_press: 
                                        PE.incrment(root,1)
                                        PE.updateNum(root,1)
                                        SPECIALpoints.text='Special Points Remaining: {}'.format(root.playerCharacter.SPECIALpoints)

                                Label:
                                    text:''

                            SPECIALrow:
                                size_hint:1,0.125
                                Label:
                                    text:''
                                StatLabel:
                                    text:'Endurance'
                                Label:
                                    text:''
                                PipButton:
                                    text:'<'
                                    on_press: 
                                        EN.incrment(root,-1)
                                        EN.updateNum(root,2)
                                        SPECIALpoints.text='Special Points Remaining: {}'.format(root.playerCharacter.SPECIALpoints)

                                numLabel:
                                    text:'{}'.format(self.getNum(root,2))
                                    id: EN
                                PipButton:
                                    text:'>'
                                    on_press: 
                                        EN.incrment(root,1)
                                        EN.updateNum(root,2)
                                        SPECIALpoints.text='Special Points Remaining: {}'.format(root.playerCharacter.SPECIALpoints)

                                Label:
                                    text:''

                            
                            
                            SPECIALrow:
                                size_hint:1,0.125
                                Label:
                                    text:''
                                StatLabel:
                                    text:'Charisma'
                                Label:
                                    text:''
                                PipButton:
                                    text:'<'
                                    on_press: 
                                        CH.incrment(root,-1)
                                        CH.updateNum(root,3)
                                        SPECIALpoints.text='Special Points Remaining: {}'.format(root.playerCharacter.SPECIALpoints)

                                numLabel:
                                    text:'{}'.format(self.getNum(root,3))
                                    id: CH
                                PipButton:
                                    text:'>'
                                    on_press: 
                                        CH.incrment(root,1)
                                        CH.updateNum(root,3)
                                        SPECIALpoints.text='Special Points Remaining: {}'.format(root.playerCharacter.SPECIALpoints)

                                Label:
                                    text:''

                            
                            
                            SPECIALrow:
                                size_hint:1,0.125
                                Label:
                                    text:''
                                StatLabel:
                                    text:'Intelligence'
                                Label:
                                    text:''
                                PipButton:
                                    text:'<'
                                    on_press: 
                                        IN.incrment(root,-1)
                                        IN.updateNum(root,4)
                                        SPECIALpoints.text='Special Points Remaining: {}'.format(root.playerCharacter.SPECIALpoints)

                                numLabel:
                                    text:'{}'.format(self.getNum(root,4))
                                    id: IN
                                PipButton:
                                    text:'>'
                                    on_press:
                                        IN.incrment(root,1)
                                        IN.updateNum(root,4)
                                        SPECIALpoints.text='Special Points Remaining: {}'.format(root.playerCharacter.SPECIALpoints)

                                Label:
                                    text:''

                            
                                
                            SPECIALrow:
                                size_hint:1,0.125
                                Label:
                                    text:''
                                StatLabel:
                                    text:'Agility'
                                Label:
                                    text:''
                                PipButton:
                                    text:'<'
                                    on_press: 
                                        AG.incrment(root,-1)
                                        AG.updateNum(root,5)
                                        SPECIALpoints.text='Special Points Remaining: {}'.format(root.playerCharacter.SPECIALpoints)

                                numLabel:
                                    text:'{}'.format(self.getNum(root,5))
                                    id: AG
                                PipButton:
                                    text:'>'
                                    on_press: 
                                        AG.incrment(root,1)
                                        AG.updateNum(root,5)
                                        SPECIALpoints.text='Special Points Remaining: {}'.format(root.playerCharacter.SPECIALpoints)

                                Label:
                                    text:''

                            
                                
                            SPECIALrow:
                                size_hint:1,0.125
                                Label:
                                    text:''
                                StatLabel:
                                    text:'Luck'
                                Label:
                                    text:''
                                PipButton:
                                    text:'<'
                                    on_press: 
                                        LK.incrment(root,-1)
                                        LK.updateNum(root,6)
                                        SPECIALpoints.text='Special Points Remaining: {}'.format(root.playerCharacter.SPECIALpoints)

                                numLabel:
                                    text:'{}'.format(self.getNum(root,6))
                                    id: LK
                                PipButton:
                                    text:'>'
                                    on_press: 
                                        LK.incrment(root,1)
                                        LK.updateNum(root,6)
                                        SPECIALpoints.text='Special Points Remaining: {}'.format(root.playerCharacter.SPECIALpoints)

                                Label:
                                    text:''

                    TabbedPanelItem:
                        text:'Traits'
                        GridLayout:
                            rows:2
                            spacing:5
                            PipButton:
                                text:'Submit Selected Traits'
                                size:root.width,root.height*0.15
                                on_press:
                                    root.updateTraitsAndWeapons(root)
                                    root.saveCharacter()
                                    #print '"Update" Button Pressed'

                            ScrollView:
                                size_hint:None,None
                                size:root.width,root.height*0.75
                                PlayerTraits:
                                    id:PlayerTraits


                    TabbedPanelItem:
                        text:'Finish'
                        BoxLayout:
                            padding:20,200
                            PipButton:
                                text:'Finished Creating Character'
                                on_press:
                                    root.playerCharacter.inventory=[]
                                    root.playerCharacter.EXP=0
                                    root.playerCharacter.update()
                                    #print root.playerCharacter.inventory
                                    root.saveCharacter()
                                    #print root.playerCharacter.inventory
                                    root.children[0].children[0].current='PipBoy'
            Screen:
                name:'PipBoy'
                on_enter:
                    STLabel.updateLabel(root, 'ST', 0)
                    PELabel.updateLabel(root, 'PE', 1)
                    ENLabel.updateLabel(root, 'EN', 2)
                    CHLabel.updateLabel(root, 'CH', 3)
                    INLabel.updateLabel(root, 'IN', 4)
                    AGLabel.updateLabel(root, 'AG', 5)
                    LKLabel.updateLabel(root, 'LK', 6)
                    Name.updateLabel(root,'Name',root.playerCharacter.name)
                    HP.updateLabel(root,'HP',root.playerCharacter.HP)
                    Level.updateLabel(root,'Level',root.playerCharacter.level)
                    CarryWeight.updateLabel(root,'CarryWeight',root.playerCharacter.carryWeight)
                    Rads.updateLabel(root,'Rads',root.playerCharacter.rads)
                    Poison.updateLabel(root,'Poison',root.playerCharacter.poison)
                    smallGuns.updateLabel('smallGuns',root.playerCharacter.smallGuns)
                    bigGuns.updateLabel('bigGuns',root.playerCharacter.bigGuns)
                    energyWeapons.updateLabel('energyWeapons',root.playerCharacter.energyWeapons)
                    unarmed.updateLabel('unarmed',root.playerCharacter.unarmed)
                    meleeWeapons.updateLabel('meleeWeapons',root.playerCharacter.meleeWeapons)
                    throwing.updateLabel('throwing',root.playerCharacter.throwing)
                    firstAid.updateLabel('firstAid',root.playerCharacter.firstAid)
                    doctor.updateLabel('doctor',root.playerCharacter.doctor)
                    sneak.updateLabel('sneak',root.playerCharacter.sneak)
                    lockpick.updateLabel('lockpick',root.playerCharacter.lockpick)
                    steal.updateLabel('steal',root.playerCharacter.steal)
                    traps.updateLabel('traps',root.playerCharacter.traps)
                    science.updateLabel('science',root.playerCharacter.science)
                    repair.updateLabel('repair',root.playerCharacter.repair)
                    pilot.updateLabel('pilot',root.playerCharacter.pilot)
                    speech.updateLabel('speech',root.playerCharacter.speech)
                    barter.updateLabel('barter',root.playerCharacter.barter)
                    gambling.updateLabel('gambling',root.playerCharacter.gambling)
                    outdoorsman.updateLabel('outdoorsman',root.playerCharacter.outdoorsman)
                    root.setEquipped(WeaponInventory)
                    root.setEquipped(ApparelInventory)
                    root.setEquipped(AidInventory)
                    root.setEquipped(MiscInventory)
                    root.setEquipped(AmmoInventory)
                    root.saveCharacter()
                    root.playerCharacter.update()
                    WeaponInventory.clear_widgets(children=None)
                    WeaponInventory.populate(root)
                    WeaponInventory.pressEquipped(root)
                    ApparelInventory.clear_widgets(children=None)
                    ApparelInventory.populate(root)
                    ApparelInventory.pressEquipped(root)
                    AidInventory.clear_widgets(children=None)
                    AidInventory.populate(root)
                    AidInventory.pressEquipped(root)
                    MiscInventory.clear_widgets(children=None)
                    MiscInventory.populate(root)
                    MiscInventory.pressEquipped(root)
                    AmmoInventory.clear_widgets(children=None)
                    AmmoInventory.populate(root)
                    AmmoInventory.pressEquipped(root)
                TabbedPanel:
                    do_default_tab: False

                    TabbedPanelItem:
                        text:'Status'
                        StackLayout:
                            GridLayout:
                                padding:10
                                spacing:20
                                size_hint:1,0.1
                                cols:3
                                CharDetailLabel:
                                    id:Name
                                    size_hint:0.33,1
                                BoxLayout:
                                    size_hint:0.33,1
                                    spacing:10
                                    PipButton:
                                        text:'<'
                                        size_hint:0.2,1
                                        on_release:
                                            root.playerCharacter.HP-=1
                                            root.playerCharacter.update()
                                            HP.updateLabel(root,'HP',root.playerCharacter.HP)
                                    CharDetailLabel:
                                        id:HP
                                        size_hint:0.6,1
                                    PipButton:
                                        text:'>'
                                        size_hint:0.2,1
                                        on_release:
                                            root.playerCharacter.HP+=1
                                            root.playerCharacter.update()
                                            HP.updateLabel(root,'HP',root.playerCharacter.HP)
                                CharDetailLabel:
                                    id:Level
                                    size_hint:0.33,1
                            GridLayout:
                                padding:10
                                spacing:20
                                size_hint:1,0.1
                                cols:3
                                CharDetailLabel:
                                    id:CarryWeight
                                    size_hint:0.33,1
                                BoxLayout
                                    size_hint:0.33,1
                                    spacing:10
                                    PipButton:
                                        text:'<'
                                        size_hint:0.2,1
                                        on_release:
                                            root.playerCharacter.rads-=1
                                            root.playerCharacter.update()
                                            Rads.updateLabel(root,'Rads',root.playerCharacter.rads)
                                    CharDetailLabel:
                                        id:Rads
                                        size_hint:0.6,1
                                    PipButton:
                                        text:'>'
                                        size_hint:0.2,1
                                        on_release:
                                            root.playerCharacter.rads+=1
                                            root.playerCharacter.update()
                                            Rads.updateLabel(root,'Rads',root.playerCharacter.rads)
                                BoxLayout:
                                    size_hint:0.33,1
                                    spacing:10
                                    PipButton:
                                        text:'<'
                                        size_hint:0.2,1
                                        on_release:
                                            root.playerCharacter.poison-=1
                                            root.playerCharacter.update()
                                            Poison.updateLabel(root,'Poison',root.playerCharacter.poison)
                                    CharDetailLabel:
                                        id:Poison
                                        size_hint:0.33,1
                                    PipButton:
                                        text:'>'
                                        size_hint:0.2,1
                                        on_release:
                                            root.playerCharacter.poison+=1
                                            root.playerCharacter.update()
                                            Poison.updateLabel(root,'Poison',root.playerCharacter.poison)


                            BoxLayout:
                                padding:10
                                spacing:20
                                size_hint:1,0.1
                                SpecialLabel:
                                    id:STLabel                            
                                SpecialLabel:
                                    id:PELabel                            
                                SpecialLabel:
                                    id:ENLabel                            
                                SpecialLabel:
                                    id:CHLabel                            
                                SpecialLabel:
                                    id:INLabel                            
                                SpecialLabel:
                                    id:AGLabel                            
                                SpecialLabel:
                                    id:LKLabel                        

                    TabbedPanelItem:
                        text:'Skills'
                        BoxLayout:
                            size_hint:1,1
                            padding:5
                            spacing:10
                            BoxLayout:
                                size_hint:1,1
                                padding:5
                                spacing:10
                                orientation:'vertical'
                                SkillLabel:
                                    id:smallGuns
                                SkillLabel:
                                    id:bigGuns
                                SkillLabel:
                                    id:energyWeapons
                                SkillLabel:
                                    id:unarmed
                                SkillLabel:
                                    id:meleeWeapons
                                SkillLabel:
                                    id:throwing
                                SkillLabel:
                                    id:firstAid
                                SkillLabel:
                                    id:doctor
                                SkillLabel:
                                    id:sneak
                            BoxLayout:
                                size_hint:1,1
                                padding:5
                                spacing:10
                                orientation:'vertical'
                                SkillLabel:
                                    id:lockpick
                                SkillLabel:
                                    id:steal
                                SkillLabel:
                                    id:traps
                                SkillLabel:
                                    id:science
                                SkillLabel:
                                    id:repair
                                SkillLabel:
                                    id:pilot
                                SkillLabel:
                                    id:speech
                                SkillLabel:
                                    id:barter
                                SkillLabel:
                                    id:gambling
                                SkillLabel:
                                    id:outdoorsman

                    TabbedPanelItem:
                        text:'Inv'
                        TabbedPanel:
                            do_default_tab:False
                            TabbedPanelItem:
                                text:'Weapons'
                                FloatLayout:
                                    GridLayout:
                                        id:OptionButtonsWeapons                         
                                        pos:root.x,self.parent.parent.top-self.height
                                        size_hint_y:None
                                        height:100
                                        spacing:10
                                        padding:10
                                        cols:4
                                        Label:
                                            text:''
                                            size:root.width*0.2,100
                                        PipButton:
                                            text:'Create New'
                                            on_press:
                                                root.children[0].children[0].current='NewWeapon'
                                        PipButton:
                                            text:'Add'
                                            size:root.width*0.2,100
                                            on_press:
                                                root.children[0].children[0].current='PreDefinedWeapon'
                                        RemoveItemButton:
                                            text:'Remove Item'
                                            size:root.width*0.2,100
                                            on_release:
                                                root.playerCharacter.removeItem(root.playerCharacter.currentlyEquipped['weapon'])
                                                WeaponInventory.clear_widgets(children=None)
                                                WeaponInventory.populate(root)
                                                WeaponInventory.pressEquipped(root)
                                    ScrollView:
                                        pos:root.x,self.parent.parent.top-self.height-OptionButtonsWeapons.height
                                        size_hint:None,None
                                        size:root.width,self.parent.parent.height-OptionButtonsWeapons.height
                                        WeaponInventory:
                                            id:WeaponInventory
                            TabbedPanelItem:
                                text:'Apparel'
                                FloatLayout:
                                    
                                    GridLayout:
                                        id:OptionButtonsApparel
                                        pos:root.x,WeaponInventory.parent.parent.parent.top-self.height
                                        size_hint_y:None
                                        height:100
                                        spacing:10
                                        padding:10
                                        cols:4
                                        Label:
                                            text:''
                                            size:root.width*0.2,100
                                        PipButton:
                                            text:'Create New'
                                            on_press:
                                                root.children[0].children[0].current='NewApparel'
                                        PipButton:
                                            text:'Add'
                                            size:root.width*0.2,100
                                            on_press:
                                                root.children[0].children[0].current='PreDefinedApparel'
                                        RemoveItemButton:
                                            text:'Remove Item'
                                            size:root.width*0.2,100
                                            on_release:
                                                root.playerCharacter.removeItem(root.playerCharacter.currentlyEquipped['body'])
                                                root.playerCharacter.removeItem(root.playerCharacter.currentlyEquipped['head'])
                                                ApparelInventory.clear_widgets(children=None)
                                                ApparelInventory.populate(root)
                                    ScrollView:
                                        pos:root.x,WeaponInventory.parent.parent.parent.top-self.height-OptionButtonsApparel.height
                                        size_hint:None,None
                                        size:root.width,WeaponInventory.parent.parent.parent.height-OptionButtonsApparel.height
                                        ApparelInventory:
                                            id:ApparelInventory
                            TabbedPanelItem:
                                text:'Aid'
                                FloatLayout:
                                    
                                    GridLayout:
                                        id:OptionButtonsAid
                                        pos:root.x,WeaponInventory.parent.parent.parent.top-self.height
                                        size_hint_y:None
                                        height:100
                                        spacing:10
                                        padding:10
                                        cols:4
                                        Label:
                                            text:''
                                            size:root.width*0.2,100
                                        PipButton:
                                            text:'Create New'
                                            on_press:
                                                root.children[0].children[0].current='NewAid'
                                        PipButton:
                                            text:'Add'
                                            size:root.width*0.2,100
                                            on_press:
                                                root.children[0].children[0].current='PreDefinedAid'
                                        RemoveItemButton:
                                            text:'Remove Item'
                                            size:root.width*0.2,100
                                            on_release:
                                                root.playerCharacter.removeItem(root.playerCharacter.currentlyEquipped['aid'])
                                                AidInventory.clear_widgets(children=None)
                                                AidInventory.populate(root)
                                    ScrollView:
                                        pos:root.x,WeaponInventory.parent.parent.parent.top-self.height-OptionButtonsAid.height
                                        size_hint:None,None
                                        size:root.width,WeaponInventory.parent.parent.parent.height-OptionButtonsAid.height
                                        AidInventory:
                                            id:AidInventory
                            TabbedPanelItem:
                                text:'Misc'
                                FloatLayout:
                                    
                                    GridLayout:
                                        id:OptionButtonsMisc
                                        pos:root.x,WeaponInventory.parent.parent.parent.top-self.height
                                        size_hint_y:None
                                        height:100
                                        spacing:10
                                        padding:10
                                        cols:4
                                        Label:
                                            text:''
                                            size:root.width*0.2,100
                                        PipButton:
                                            text:'Create New'
                                            on_press:
                                                root.children[0].children[0].current='NewMisc'
                                        PipButton:
                                            text:'Add'
                                            size:root.width*0.2,100
                                            on_press:
                                                root.children[0].children[0].current='PreDefinedMisc'
                                        RemoveItemButton:
                                            text:'Remove Item'
                                            size:root.width*0.2,100
                                            on_release:
                                                root.playerCharacter.removeItem(root.playerCharacter.currentlyEquipped['misc'])
                                                MiscInventory.clear_widgets(children=None)
                                                MiscInventory.populate(root)
                                    ScrollView:
                                        pos:root.x,WeaponInventory.parent.parent.parent.top-self.height-OptionButtonsMisc.height
                                        size_hint:None,None
                                        size:root.width,WeaponInventory.parent.parent.parent.height-OptionButtonsMisc.height
                                        MiscInventory:
                                            id:MiscInventory
                            TabbedPanelItem:
                                text:'Ammo'
                                FloatLayout:
                                    GridLayout:
                                        id:OptionButtonsAmmo
                                        pos:root.x,WeaponInventory.parent.parent.parent.top-self.height
                                        size_hint_y:None
                                        height:100
                                        spacing:10
                                        padding:10
                                        cols:4
                                        Label:
                                            text:''
                                            size:root.width*0.2,100
                                        PipButton:
                                            text:'Create New'
                                            on_press:
                                                root.children[0].children[0].current='NewAmmo'
                                        PipButton:
                                            text:'Add'
                                            size:root.width*0.2,100
                                            on_press:
                                                root.children[0].children[0].current='PreDefinedAmmo'
                                        RemoveItemButton:
                                            text:'Remove Item'
                                            size:root.width*0.2,100
                                            on_release:
                                                #print root.playerCharacter.currentlyEquipped, 'name = ', root.playerCharacter.currentlyEquipped['ammo'].name
                                                root.playerCharacter.removeAmmo(root.playerCharacter.currentlyEquipped['ammo'])
                                                AmmoInventory.clear_widgets(children=None)
                                                AmmoInventory.populate(root)
                                    ScrollView:
                                        pos:root.x,WeaponInventory.parent.parent.parent.top-self.height-OptionButtonsAmmo.height
                                        size_hint:None,None
                                        size:root.width,WeaponInventory.parent.parent.parent.height-OptionButtonsAmmo.height
                                        AmmoInventory:
                                            id:AmmoInventory
                    TabbedPanelItem:
                        text:'Map'
                        FloatLayout:
                            pos:root.width*0.5,root.height*0.5
                            id:MapContainer
                            Scatter:
                                id:MapScatter
                                size:self.width,self.width*0.64652
                                scale:7
                                center:self.parent.center
                                size_hint:None,None
                                size:Map.size
                                do_rotation:False
                                do_collide_after_children:True
                                scale_min:7
                                scale_max:500.
                                GridLayout:
                                    id:Map
                                    size:self.width,self.width*0.6455
                                    cols:5
                                    rows:5
                                    size_hint:None,None
                                    #spacing:0,-35.5
                                    padding:0,0
                                    Image:
                                        source:root.os.path.join('map','map [www.imagesplitter.net]-0-0.jpeg')
                                    Image:
                                        source:root.os.path.join('map','map [www.imagesplitter.net]-0-1.jpeg')
                                    Image:
                                        source:root.os.path.join('map','map [www.imagesplitter.net]-0-2.jpeg')
                                    Image:
                                        source:root.os.path.join('map','map [www.imagesplitter.net]-0-3.jpeg')
                                    Image:
                                        source:root.os.path.join('map','map [www.imagesplitter.net]-0-4.jpeg')
                                    Image:
                                        source:root.os.path.join('map','map [www.imagesplitter.net]-1-0.jpeg')
                                    Image:
                                        source:root.os.path.join('map','map [www.imagesplitter.net]-1-1.jpeg')
                                    Image:
                                        source:root.os.path.join('map','map [www.imagesplitter.net]-1-2.jpeg')
                                    Image:
                                        source:root.os.path.join('map','map [www.imagesplitter.net]-1-3.jpeg')
                                    Image:
                                        source:root.os.path.join('map','map [www.imagesplitter.net]-1-4.jpeg')
                                    Image:
                                        source:root.os.path.join('map','map [www.imagesplitter.net]-2-0.jpeg')
                                    Image:
                                        source:root.os.path.join('map','map [www.imagesplitter.net]-2-1.jpeg')
                                    Image:
                                        source:root.os.path.join('map','map [www.imagesplitter.net]-2-2.jpeg')
                                    Image:
                                        source:root.os.path.join('map','map [www.imagesplitter.net]-2-3.jpeg')
                                    Image:
                                        source:root.os.path.join('map','map [www.imagesplitter.net]-2-4.jpeg')
                                    Image:
                                        source:root.os.path.join('map','map [www.imagesplitter.net]-3-0.jpeg')
                                    Image:
                                        source:root.os.path.join('map','map [www.imagesplitter.net]-3-1.jpeg')
                                    Image:
                                        source:root.os.path.join('map','map [www.imagesplitter.net]-3-2.jpeg')
                                    Image:
                                        source:root.os.path.join('map','map [www.imagesplitter.net]-3-3.jpeg')
                                    Image:
                                        source:root.os.path.join('map','map [www.imagesplitter.net]-3-4.jpeg')
                                    Image:
                                        source:root.os.path.join('map','map [www.imagesplitter.net]-4-0.jpeg')
                                    Image:
                                        source:root.os.path.join('map','map [www.imagesplitter.net]-4-1.jpeg')
                                    Image:
                                        source:root.os.path.join('map','map [www.imagesplitter.net]-4-2.jpeg')
                                    Image:
                                        source:root.os.path.join('map','map [www.imagesplitter.net]-4-3.jpeg')
                                    Image:
                                        source:root.os.path.join('map','map [www.imagesplitter.net]-4-4.jpeg')

            Screen:
                name:'PreDefinedWeapon'
                on_enter:
                    PreDefinedWeaponInventory.clear_widgets(children=None)

                FloatLayout:        
                    GridLayout:
                        pos:root.x,root.top-self.height
                        size_hint_y:None
                        height:100
                        padding:10
                        spacing:10
                        cols:4
                        
                        TextInput:
                            id:WeaponSearch
                            hint_text:'Search...'
                            size:root.width*0.4,100
                            multiline:False
                            text:''
                            on_text_validate:
                                PreDefinedWeaponInventory.clear_widgets(children=None)
                                PreDefinedWeaponInventory.search(WeaponSearch.text,root)
                        PipButton:
                            text:'Search'
                            size:root.width*0.2,100
                            on_press:
                                PreDefinedWeaponInventory.clear_widgets(children=None)
                                PreDefinedWeaponInventory.search(WeaponSearch.text,root)
                        PipButton:
                            text:'Add'
                            size:root.width*0.1,100
                            on_press:
                                root.addToInventory(PreDefinedWeaponInventory)
                                root.children[0].children[0].current='PipBoy'
                        PipButton:
                            text:'Delete'
                            size:root.width*0.1,100
                            on_press:
                                root.deleteItem(PreDefinedWeaponInventory)
                                PreDefinedWeaponInventory.clear_widgets(children=None)
                                PreDefinedWeaponInventory.search(WeaponSearch.text,root)
                    ScrollView:
                        pos:root.x,root.top-self.height-100
                        size_hint:None,None
                        size:root.width,root.height-100
                        PreDefinedWeaponInventory:
                            id:PreDefinedWeaponInventory

            Screen:
                name:'PreDefinedApparel'
                on_enter:
                    PreDefinedApparelInventory.clear_widgets(children=None)

                FloatLayout:        
                    GridLayout:
                        pos:root.x,root.top-self.height
                        size_hint_y:None
                        height:100
                        padding:10
                        spacing:10
                        cols:4
                        TextInput:
                            id:ApparelSearch
                            hint_text:'Search...'
                            size:root.width*0.4,100
                            multiline:False
                            text:''
                            on_text_validate:
                                PreDefinedApparelInventory.clear_widgets(children=None)
                                PreDefinedApparelInventory.search(ApparelSearch.text,root)
                        PipButton:
                            text:'Search'
                            size:root.width*0.2,100
                            on_press:
                                PreDefinedApparelInventory.clear_widgets(children=None)
                                PreDefinedApparelInventory.search(ApparelSearch.text,root)
                        PipButton:
                            text:'Add'
                            size:root.width*0.1,100
                            on_press:
                                root.addToInventory(PreDefinedApparelInventory)
                                root.children[0].children[0].current='PipBoy'
                        PipButton:
                            text:'Delete'
                            size:root.width*0.1,100
                            on_press:
                                root.deleteItem(PreDefinedApparelInventory)
                                PreDefinedApparelInventory.clear_widgets(children=None)
                                PreDefinedApparelInventory.search(ApparelSearch.text,root)
                    ScrollView:
                        pos:root.x,root.top-self.height-100
                        size_hint:None,None
                        size:root.width,root.height-100
                        PreDefinedApparelInventory:
                            id:PreDefinedApparelInventory

            Screen:
                name:'PreDefinedAid'
                on_enter:
                    PreDefinedAidInventory.clear_widgets(children=None)

                FloatLayout:        
                    GridLayout:
                        pos:root.x,root.top-self.height
                        size_hint_y:None
                        height:100
                        padding:10
                        spacing:10
                        cols:4
                        
                        TextInput:
                            id:AidSearch
                            hint_text:'Search...'
                            size:root.width*0.4,100
                            multiline:False
                            text:''
                            on_text_validate:
                                PreDefinedAidInventory.clear_widgets(children=None)
                                PreDefinedAidInventory.search(AidSearch.text,root)
                        PipButton:
                            text:'Search'
                            size:root.width*0.2,100
                            on_press:
                                PreDefinedAidInventory.clear_widgets(children=None)
                                PreDefinedAidInventory.search(AidSearch.text,root)
                        PipButton:
                            text:'Add'
                            size:root.width*0.1,100
                            on_press:
                                root.addToInventory(PreDefinedAidInventory)
                                root.children[0].children[0].current='PipBoy'
                        PipButton:
                            text:'Delete'
                            size:root.width*0.1,100
                            on_press:
                                root.deleteItem(PreDefinedAidInventory)
                                PreDefinedAidInventory.clear_widgets(children=None)
                                PreDefinedAidInventory.search(AidSearch.text,root)
                    ScrollView:
                        pos:root.x,root.top-self.height-100
                        size_hint:None,None
                        size:root.width,root.height-100
                        PreDefinedAidInventory:
                            id:PreDefinedAidInventory
            Screen:
                name:'PreDefinedMisc'
                on_enter:
                    PreDefinedMiscInventory.clear_widgets(children=None)

                FloatLayout:        
                    GridLayout:
                        pos:root.x,root.top-self.height
                        size_hint_y:None
                        height:100
                        padding:10
                        spacing:10
                        cols:4

                        TextInput:
                            id:MiscSearch
                            hint_text:'Search...'
                            size:root.width*0.4,100
                            multiline:False
                            text:''
                            on_text_validate:
                                PreDefinedMiscInventory.clear_widgets(children=None)
                                PreDefinedMiscInventory.search(MiscSearch.text,root)
                        PipButton:
                            text:'Search'
                            size:root.width*0.2,100
                            on_press:
                                PreDefinedMiscInventory.clear_widgets(children=None)
                                PreDefinedMiscInventory.search(MiscSearch.text,root)
                        PipButton:
                            text:'Add'
                            size:root.width*0.1,100
                            on_press:
                                root.addToInventory(PreDefinedMiscInventory)
                                root.children[0].children[0].current='PipBoy'
                        PipButton:
                            text:'Delete'
                            size:root.width*0.1,100
                            on_press:
                                root.deleteItem(PreDefinedMiscInventory)
                                PreDefinedMiscInventory.clear_widgets(children=None)
                                PreDefinedMiscInventory.search(MiscSearch.text,root)
                    ScrollView:
                        pos:root.x,root.top-self.height-100
                        size_hint:None,None
                        size:root.width,root.height-100
                        PreDefinedMiscInventory:
                            id:PreDefinedMiscInventory
            Screen:
                name:'PreDefinedAmmo'
                on_enter:
                    PreDefinedAmmoInventory.clear_widgets(children=None)
                FloatLayout:        
                    GridLayout:
                        pos:root.x,root.top-self.height
                        size_hint_y:None
                        height:100
                        padding:10
                        spacing:10
                        cols:4

                        TextInput:
                            id:AmmoSearch
                            hint_text:'Search...'
                            size:root.width*0.4,100
                            multiline:False
                            text:''
                            on_text_validate:
                                PreDefinedAmmoInventory.clear_widgets(children=None)
                                PreDefinedAmmoInventory.search(AmmoSearch.text,root)
                        PipButton:
                            text:'Search'
                            size:root.width*0.2,100
                            on_press:
                                PreDefinedAmmoInventory.clear_widgets(children=None)
                                PreDefinedAmmoInventory.search(AmmoSearch.text,root)
                        PipButton:
                            text:'Add'
                            size:root.width*0.1,100
                            on_press:
                                root.addToInventory(PreDefinedAmmoInventory,count=PreDefinedAmmoInventory.getCount())
                                root.children[0].children[0].current='PipBoy'
                        PipButton:
                            text:'Delete'
                            size:root.width*0.1,100
                            on_press:
                                root.deleteItem(PreDefinedAmmoInventory)
                                PreDefinedAmmoInventory.clear_widgets(children=None)
                                PreDefinedAmmoInventory.search(AmmoSearch.text,root)
                    ScrollView:
                        pos:root.x,root.top-self.height-100
                        size_hint:None,None
                        size:root.width,root.height-100
                        PreDefinedAmmoInventory:
                            id:PreDefinedAmmoInventory
            Screen:
                name:'NewWeapon'
                FloatLayout:
                    GridLayout:
                        pos:root.x,root.top-self.height
                        size_hint_y:None
                        height:100
                        padding:10
                        spacing:10
                        cols:4
                        Label:
                            size:root.width*0.2,100
                            text:''
                        Label:
                            size:root.width*0.2,100
                            text:''
                        PipButton:
                            text:'Cancel'
                            size:root.width*0.2,100
                            on_press:
                                root.children[0].children[0].current='PipBoy'
                        PipButton:
                            text:'Add'
                            size:root.width*0.2,100
                            on_press:
                                root.createItem('weapon',Name=NewWeaponName.text,Value=int(NewWeaponValue.text),minST=int(NewWeaponminST.text),Weight=float(NewWeaponWeight.text),Dmg=NewWeaponDmg.text,Range=int(NewWeaponRange.text),APS=int(NewWeaponAPS.text),APT=int(NewWeaponAPT.text),APB=NewWeaponAPB.text,ammoType=NewWeaponAmmoType.text,magSize=int(NewWeaponMagSize.text))
                                root.children[0].children[0].current='PipBoy'
                    ScrollView:
                        pos:root.x,root.top-self.height-100
                        size_hint:None,None
                        size:root.width,root.height-100
                        FloatLayout:
                            size_hint_y:None
                            size:root.width,root.height*1.25
                            GridLayout:
                                pos:self.parent.x,self.parent.top-self.height-100
                                cols:4
                                rows:1
                                spacing:10
                                padding:10
                                row_default_height:100
                                row_force_default:True
                                Label:
                                    size_hint_x:0.2
                                PipLabel:
                                    size_hint_x:0.3
                                    text:'Name'
                                TextInput:
                                    id:NewWeaponName
                                    multiline:False
                                    size_hint_x:0.3
                                Label:
                                    size_hint_x:0.2

                            GridLayout:
                                pos:self.parent.x,self.parent.top-self.height-210
                                cols:10
                                rows:5
                                spacing:10
                                padding:10
                                row_default_height:50
                                row_force_default:True
                                
                                PipLabel:
                                    text:'Value'
                                PipLabel:
                                    text:'minST'
                                PipLabel:
                                    text:'Weight'
                                PipLabel:
                                    text:'Dmg'
                                PipLabel:
                                    text:'Range'
                                PipLabel:
                                    text:'APS'
                                PipLabel:
                                    text:'APT'
                                PipLabel:
                                    text:'APB'
                                PipLabel:
                                    text:'Ammo\nType'
                                PipLabel:
                                    text:'Mag\nSize'


                                PipButton:
                                    text:'[+]'
                                    on_press:
                                        NewWeaponValue.text=str(int(NewWeaponValue.text)+1)
                                PipButton:
                                    text:'[+]'
                                    on_press:
                                        NewWeaponminST.text=str(int(NewWeaponminST.text)+1)
                                PipButton:
                                    text:'[+]'
                                    on_press:
                                        NewWeaponWeight.text=str(float(NewWeaponWeight.text)+1)
                                Label:
                                    text:''
                                PipButton:
                                    text:'[+]'
                                    on_press:
                                        NewWeaponRange.text=str(int(NewWeaponRange.text)+1)
                                PipButton:
                                    text:'[+]'
                                    on_press:
                                        NewWeaponAPS.text=str(int(NewWeaponAPS.text)+1)
                                PipButton:
                                    text:'[+]'
                                    on_press:
                                        NewWeaponAPT.text=str(int(NewWeaponAPT.text)+1)
                                PipButton:
                                    text:'[+]'
                                    on_press:
                                        NewWeaponAPB.text=str(int(NewWeaponAPB.text)+1)
                                Label:
                                    text:''
                                Label:
                                    text:''

                                TextInput:
                                    id:NewWeaponValue
                                    multiline:False
                                    text:'0'
                                TextInput:
                                    id:NewWeaponminST
                                    multiline:False
                                    text:'0'
                                TextInput:
                                    id:NewWeaponWeight
                                    multiline:False
                                    text:'0'
                                TextInput:
                                    id:NewWeaponDmg
                                    multiline:False
                                    text:''
                                TextInput:
                                    id:NewWeaponRange
                                    multiline:False
                                    text:'0'
                                TextInput:
                                    id:NewWeaponAPS
                                    multiline:False
                                    text:'0'
                                TextInput:
                                    id:NewWeaponAPT
                                    multiline:False
                                    text:'0'
                                TextInput:
                                    id:NewWeaponAPB
                                    multiline:False
                                    text:'0'
                                TextInput:
                                    id:NewWeaponAmmoType
                                    multiline:False
                                    text:''
                                TextInput:
                                    id:NewWeaponMagSize
                                    multiline:False
                                    text:''

                                PipButton:
                                    text:'[-]'
                                    on_press:
                                        NewWeaponValue.text=str(int(NewWeaponValue.text)-1)
                                PipButton:
                                    text:'[-]'
                                    on_press:
                                        NewWeaponminST.text=str(int(NewWeaponminST.text)-1)
                                PipButton:
                                    text:'[-]'
                                    on_press:
                                        NewWeaponWeight.text=str(float(NewWeaponWeight.text)-1)
                                Label:
                                    text:''
                                PipButton:
                                    text:'[-]'
                                    on_press:
                                        NewWeaponRange.text=str(int(NewWeaponRange.text)-1)
                                PipButton:
                                    text:'[-]'
                                    on_press:
                                        NewWeaponAPS.text=str(int(NewWeaponAPS.text)-1)
                                PipButton:
                                    text:'[-]'
                                    on_press:
                                        NewWeaponAPT.text=str(int(NewWeaponAPT.text)-1)
                                PipButton:
                                    text:'[-]'
                                    on_press:
                                        NewWeaponAPB.text=str(int(NewWeaponAPB.text)-1)
                                Label:
                                    text:''
                                Label:
                                    text:''

                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''

            Screen:
                name:'NewApparel'
                FloatLayout:
                    GridLayout:
                        pos:root.x,root.top-self.height
                        size_hint_y:None
                        height:100
                        padding:10
                        spacing:10
                        cols:4
                        Label:
                            size:root.width*0.2,100
                            text:''
                        Label:
                            size:root.width*0.2,100
                            text:''
                        PipButton:
                            text:'Cancel'
                            size:root.width*0.2,100
                            on_press:
                                root.children[0].children[0].current='PipBoy'
                        PipButton:
                            text:'Add'
                            size:root.width*0.2,100
                            on_press:
                                root.createItem(NewApparelType.text,Name=NewApparelName.text,Value=int(NewApparelValue.text),Weight=float(NewApparelWeight.text),AC=int(NewApparelAC.text),N=NewApparelN.text,L=NewApparelL.text,F=NewApparelF.text,P=NewApparelP.text,E=NewApparelE.text)
                                root.children[0].children[0].current='PipBoy'
                    ScrollView:
                        pos:root.x,root.top-self.height-100
                        size_hint:None,None
                        size:root.width,root.height-100
                        FloatLayout:
                            size_hint_y:None
                            size:root.width,root.height*1.25
                            GridLayout:
                                pos:self.parent.x,self.parent.top-self.height-100
                                cols:4
                                rows:1
                                spacing:10
                                padding:10
                                row_default_height:100
                                row_force_default:True
                                Label:
                                    size_hint_x:0.2
                                PipLabel:
                                    size_hint_x:0.3
                                    text:'Name'
                                TextInput:
                                    id:NewApparelName
                                    multiline:False
                                    size_hint_x:0.3
                                Label:
                                    size_hint_x:0.2

                            GridLayout:
                                pos:self.parent.x,self.parent.top-self.height-210
                                cols:9
                                rows:5
                                spacing:10
                                padding:10
                                row_default_height:50
                                row_force_default:True
                                
                                PipLabel:
                                    text:'Value'
                                PipLabel:
                                    text:'Weight'
                                PipLabel:
                                    text:'AC'
                                PipLabel:
                                    text:'N'
                                PipLabel:
                                    text:'L'
                                PipLabel:
                                    text:'F'
                                PipLabel:
                                    text:'P'
                                PipLabel:
                                    text:'E'
                                PipLabel:
                                    text:'Type'

                                PipButton:
                                    text:'[+]'
                                    on_press:
                                        NewApparelValue.text=str(int(NewApparelValue.text)+1)
                                PipButton:
                                    text:'[+]'
                                    on_press:
                                        NewApparelWeight.text=str(float(NewApparelWeight.text)+1)
                                PipButton:
                                    text:'[+]'
                                    on_press:
                                        NewApparelAC.text=str(int(NewApparelAC.text)+1)
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                PipButton:
                                    text:'[+]'
                                    on_press:
                                        NewApparelType.text='head'

                                TextInput:
                                    id:NewApparelValue
                                    multiline:False
                                    text:'0'
                                TextInput:
                                    id:NewApparelWeight
                                    multiline:False
                                    text:'0'
                                TextInput:
                                    id:NewApparelAC
                                    multiline:False
                                    text:'0'
                                TextInput:
                                    id:NewApparelN
                                    multiline:False
                                    text:''
                                TextInput:
                                    id:NewApparelL
                                    multiline:False
                                    text:''
                                TextInput:
                                    id:NewApparelF
                                    multiline:False
                                    text:''
                                TextInput:
                                    id:NewApparelP
                                    multiline:False
                                    text:''
                                TextInput:
                                    id:NewApparelE
                                    multiline:False
                                    text:''
                                PipLabel:
                                    text:''
                                    id:NewApparelType

                                PipButton:
                                    text:'[-]'
                                    on_press:
                                        NewApparelValue.text=str(int(NewApparelValue.text)-1)
                                PipButton:
                                    text:'[-]'
                                    on_press:
                                        NewApparelWeight.text=str(float(NewApparelWeight.text)-1)
                                PipButton:
                                    text:'[-]'
                                    on_press:
                                        NewApparelAC.text=str(int(NewApparelAC.text)-1)
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                PipButton:
                                    text:'[-]'
                                    on_press:
                                        NewApparelType.text='body'
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''

            Screen:
                name:'NewAid'
                FloatLayout:
                    GridLayout:
                        pos:root.x,root.top-self.height
                        size_hint_y:None
                        height:100
                        padding:10
                        spacing:10
                        cols:4
                        Label:
                            size:root.width*0.2,100
                            text:''
                        Label:
                            size:root.width*0.2,100
                            text:''
                        PipButton:
                            text:'Cancel'
                            size:root.width*0.2,100
                            on_press:
                                root.children[0].children[0].current='PipBoy'
                        PipButton:
                            text:'Add'
                            size:root.width*0.2,100
                            on_press:
                                root.createItem('aid',Name=NewAidName.text,Value=int(NewAidValue.text),Weight=float(NewAidWeight.text),HP=int(NewAidHP.text),Rad=int(NewAidRad.text),Poison=int(NewAidPoison.text),ST=int(NewAidST.text),PE=int(NewAidPE.text),EN=int(NewAidEN.text),CH=int(NewAidCH.text),IN=int(NewAidIN.text),AG=int(NewAidAG.text),LK=int(NewAidLK.text),radRes=int(NewAidradRes.text),poisonRes=int(NewAidpoisonRes.text))
                                root.children[0].children[0].current='PipBoy'
                    ScrollView:
                        pos:root.x,root.top-self.height-100
                        size_hint:None,None
                        size:root.width,root.height-100
                        FloatLayout:
                            size_hint_y:None
                            size:root.width,root.height*1.5
                            GridLayout:
                                pos:self.parent.x,self.parent.top-self.height
                                cols:4
                                rows:1
                                spacing:10
                                padding:10
                                row_default_height:100
                                row_force_default:True
                                Label:
                                    size_hint_x:0.2
                                PipLabel:
                                    size_hint_x:0.3
                                    text:'Name'
                                TextInput:
                                    id:NewAidName
                                    multiline:False
                                    size_hint_x:0.3
                                Label:
                                    size_hint_x:0.2
                            GridLayout:
                                pos:self.parent.x,self.parent.top-self.height-110
                                cols:7
                                rows:11
                                spacing:10
                                padding:10
                                height:400
                                width:root.width
                                PipLabel:
                                    text:'Value'
                                PipLabel:
                                    text:'Weight'
                                PipLabel:
                                    text:'HP'
                                PipLabel:
                                    text:'Rad'
                                PipLabel:
                                    text:'Poison'
                                PipLabel:
                                    text:'rRes'
                                PipLabel:
                                    text:'pRes'
                                
                                PipButton:
                                    text:'[+]'
                                    on_press:
                                        NewAidValue.text=str(int(NewAidValue.text)+1)
                                PipButton:
                                    text:'[+]'
                                    on_press:
                                        NewAidWeight.text=str(float(NewAidWeight.text)+1)
                                PipButton:
                                    text:'[+]'
                                    on_press:
                                        NewAidHP.text=str(int(NewAidHP.text)+1)
                                PipButton:
                                    text:'[+]'
                                    on_press:
                                        NewAidRad.text=str(int(NewAidRad.text)+1)
                                PipButton:
                                    text:'[+]'
                                    on_press:
                                        NewAidPoison.text=str(int(NewAidPoison.text)+1)
                                PipButton:
                                    text:'[+]'
                                    on_press:
                                        NewAidradRes.text=str(int(NewAidradRes.text)+1)
                                PipButton:
                                    text:'[+]'
                                    on_press:
                                        NewAidpoisonRes.text=str(int(NewAidpoisonRes.text)+1)
                                


                                TextInput:
                                    id:NewAidValue
                                    text:'0'
                                    multiline:False
                                TextInput:
                                    id:NewAidWeight
                                    text:'0'
                                    multiline:False
                                TextInput:
                                    id:NewAidHP
                                    text:'0'
                                    multiline:False
                                TextInput:
                                    id:NewAidRad
                                    text:'0'
                                    multiline:False
                                TextInput:
                                    id:NewAidPoison
                                    text:'0'
                                    multiline:False
                                TextInput:
                                    id:NewAidradRes
                                    text:'0'
                                    multiline:False
                                TextInput:
                                    id:NewAidpoisonRes
                                    text:'0'
                                    multiline:False
                                


                                PipButton:
                                    text:'[-]'
                                    on_press:
                                        NewAidValue.text=str(int(NewAidValue.text)-1)
                                PipButton:
                                    text:'[-]'
                                    on_press:
                                        NewAidWeight.text=str(float(NewAidWeight.text)-1)
                                PipButton:
                                    text:'[-]'
                                    on_press:
                                        NewAidHP.text=str(int(NewAidHP.text)-1)
                                PipButton:
                                    text:'[-]'
                                    on_press:
                                        NewAidRad.text=str(int(NewAidRad.text)-1)
                                PipButton:
                                    text:'[-]'
                                    on_press:
                                        NewAidPoison.text=str(int(NewAidPoison.text)-1)
                                PipButton:
                                    text:'[-]'
                                    on_press:
                                        NewAidradRes.text=str(int(NewAidradRes.text)-1)
                                PipButton:
                                    text:'[-]'
                                    on_press:
                                        NewAidpoisonRes.text=str(int(NewAidpoisonRes.text)-1)
                                
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''

                                PipLabel:
                                    text:'ST'
                                PipLabel:
                                    text:'PE'
                                PipLabel:
                                    text:'EN'
                                PipLabel:
                                    text:'CH'
                                PipLabel:
                                    text:'IN'
                                PipLabel:
                                    text:'AG'
                                PipLabel:
                                    text:'LK'

                                PipButton:
                                    text:'[+]'
                                    on_press:
                                        NewAidST.text=str(int(NewAidST.text)+1)
                                PipButton:
                                    text:'[+]'
                                    on_press:
                                        NewAidPE.text=str(int(NewAidPE.text)+1)
                                PipButton:
                                    text:'[+]'
                                    on_press:
                                        NewAidEN.text=str(int(NewAidEN.text)+1)
                                PipButton:
                                    text:'[+]'
                                    on_press:
                                        NewAidCH.text=str(int(NewAidCH.text)+1)
                                PipButton:
                                    text:'[+]'
                                    on_press:
                                        NewAidIN.text=str(int(NewAidIN.text)+1)
                                PipButton:
                                    text:'[+]'
                                    on_press:
                                        NewAidAG.text=str(int(NewAidAG.text)+1)
                                PipButton:
                                    text:'[+]'
                                    on_press:
                                        NewAidLK.text=str(int(NewAidLK.text)+1)
                                PipLabel:
                                    id:NewAidST
                                    text:'0'
                                PipLabel:
                                    id:NewAidPE
                                    text:'0'
                                PipLabel:
                                    id:NewAidEN
                                    text:'0'
                                PipLabel:
                                    id:NewAidCH
                                    text:'0'
                                PipLabel:
                                    id:NewAidIN
                                    text:'0'
                                PipLabel:
                                    id:NewAidAG
                                    text:'0'
                                PipLabel:
                                    id:NewAidLK
                                    text:'0'

                                PipButton:
                                    text:'[-]'
                                    on_press:
                                        NewAidST.text=str(int(NewAidST.text)-1)
                                PipButton:
                                    text:'[-]'
                                    on_press:
                                        NewAidPE.text=str(int(NewAidPE.text)-1)
                                PipButton:
                                    text:'[-]'
                                    on_press:
                                        NewAidEN.text=str(int(NewAidEN.text)-1)
                                PipButton:
                                    text:'[-]'
                                    on_press:
                                        NewAidCH.text=str(int(NewAidCH.text)-1)
                                PipButton:
                                    text:'[-]'
                                    on_press:
                                        NewAidIN.text=str(int(NewAidIN.text)-1)
                                PipButton:
                                    text:'[-]'
                                    on_press:
                                        NewAidAG.text=str(int(NewAidAG.text)-1)
                                PipButton:
                                    text:'[-]'
                                    on_press:
                                        NewAidLK.text=str(int(NewAidLK.text)-1)
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''

            Screen:
                name:'NewMisc'
                FloatLayout:        
                    GridLayout:
                        pos:root.x,root.top-self.height
                        size_hint_y:None
                        height:100
                        padding:10
                        spacing:10
                        cols:4
                        Label:
                            size:root.width*0.2,100
                            text:''
                        Label:
                            size:root.width*0.2,100
                            text:''
                        PipButton:
                            text:'Cancel'
                            size:root.width*0.2,100
                            on_press:
                                root.children[0].children[0].current='PipBoy'
                        PipButton:
                            text:'Add'
                            size:root.width*0.2,100
                            on_press:
                                root.createItem('misc',Name=NewMiscName.text,Weight=float(NewMiscWeight.text),Value=int(NewMiscValue.text),Description=NewMiscDescription.text)
                                root.children[0].children[0].current='PipBoy'

                    ScrollView:
                        pos:root.x,root.top-self.height-100
                        size_hint:None,None
                        size:root.width,root.height*0.6
                        GridLayout:
                            cols:2
                            rows:1
                            spacing:10
                            padding:10
                            BoxLayout:
                                spacing:10
                                padding:10
                                height:100
                                orientation:'vertical'
                                BoxLayout:
                                    spacing:10
                                    padding:10
                                    height:100
                                    PipLabel:
                                        text:'Name'
                                    TextInput:
                                        id:NewMiscName
                                        multiline:False
                                        halign:'center'
                                        valign:'middle'
                                BoxLayout:
                                    spacing:10
                                    padding:10
                                    height:100
                                    PipLabel:
                                        text:'Weight'
                                    PipButton:
                                        text:'<'
                                        on_press: 
                                            NewMiscWeight.text=str(float(NewMiscWeight.text)-1)
                                    TextInput:
                                        id:NewMiscWeight
                                        multiline:False
                                        halign:'center'
                                        valign:'middle'
                                        text:'0'
                                    PipButton:
                                        text:'>'
                                        on_press:
                                            NewMiscWeight.text=str(float(NewMiscWeight.text)+1)
                                BoxLayout:
                                    spacing:10
                                    padding:10
                                    height:100
                                    PipLabel:
                                        text:'Value'
                                    PipButton:
                                        text:'<'
                                        on_press: 
                                            NewMiscValue.text=str(int(NewMiscValue.text)-1)
                                    TextInput:
                                        id:NewMiscValue
                                        multiline:False
                                        halign:'center'
                                        valign:'middle'
                                        text:'0'
                                    PipButton:
                                        text:'>'
                                        on_press:
                                            NewMiscValue.text=str(int(NewMiscValue.text)+1)
                            BoxLayout:
                                height:100
                                spacing:10
                                padding:10
                                PipLabel:
                                    text:'Description'
                                TextInput:
                                    id:NewMiscDescription
                                    multiline:False
            Screen:
                name:'NewAmmo'
                MyEffect:
                    disabled: True
                FloatLayout:        
                    GridLayout:
                        pos:root.x,root.top-self.height
                        size_hint_y:None
                        height:100
                        padding:10
                        spacing:10
                        cols:4
                        Label:
                            size:root.width*0.2,100
                            text:''
                        Label:
                            size:root.width*0.2,100
                            text:''
                        PipButton:
                            text:'Cancel'
                            size:root.width*0.2,100
                            on_press:
                                root.children[0].children[0].current='PipBoy'
                        PipButton:
                            text:'Add'
                            size:root.width*0.2,100
                            on_press:
                                root.createItem('ammo',Name=NewAmmoName.text,Value=int(NewAmmoValue.text),Weight=float(NewAmmoWeight.text),AC=int(NewAmmoAC.text),DR=int(NewAmmoDR.text))
                                root.children[0].children[0].current='PipBoy'
                    ScrollView:
                        pos:root.x,root.top-self.height-100
                        size_hint:None,None
                        size:root.width,root.height*0.8
                        FloatLayout:
                            size_hint_y:None
                            size:root.width,root.height*1.5                        
                            GridLayout:
                                rows:1
                                cols:4
                                pos:self.parent.x,self.parent.top-self.height
                                spacing:10
                                padding:10
                                row_default_height:100
                                row_force_default:True
                                height:100
                                Label:
                                    text:''
                                PipLabel:
                                    text:'Name'
                                TextInput:
                                    id:NewAmmoName
                                    multiline:False
                                    halign:'center'
                                    valign:'middle'
                                Label:
                                    text:''
                            GridLayout:
                                pos:self.parent.x,self.parent.top-self.height-110
                                spacing:10
                                padding:10
                                cols:4
                                rows:6
                                row_default_height:100
                                row_force_default:True
                                PipLabel:
                                    text:'Value'
                                PipLabel:
                                    text:'Weight'
                                PipLabel:
                                    text:'AC'
                                PipLabel:
                                    text:'DR'

                                
                                PipButton:
                                    text:'[+]'
                                    on_press:
                                        NewAmmoValue.text=str(int(NewAmmoValue.text)+1)
                                
                                PipButton:
                                    text:'[+]'
                                    on_press:
                                        NewAmmoWeight.text=str(float(NewAmmoWeight.text)+1)

                                PipButton:
                                    text:'[+]'
                                    on_press:
                                        NewAmmoAC.text=str(int(NewAmmoAC.text)+1)

                                PipButton:
                                    text:'[+]'
                                    on_press:
                                        NewAmmoDR.text=str(int(NewAmmoDR.text)+1)

                                TextInput:
                                    id:NewAmmoValue
                                    multiline:False
                                    text:'0'
                                TextInput:
                                    id:NewAmmoWeight
                                    multiline:False
                                    text:'0.0'
                                TextInput:
                                    id:NewAmmoAC
                                    multiline:False
                                    text:'0'
                                TextInput:
                                    id:NewAmmoDR
                                    multiline:False
                                    text:'0'

                                PipButton:
                                    text:'[-]'
                                    on_press:
                                        NewAmmoValue.text=str(int(NewAmmoValue.text)-1)
                                PipButton:
                                    text:'[-]'
                                    on_press:
                                        NewAmmoWeight.text=str(float(NewAmmoWeight.text)-1.0)
                                PipButton:
                                    text:'[-]'
                                    on_press:
                                        NewAmmoAC.text=str(int(NewAmmoAC.text)-1)
                                PipButton:
                                    text:'[-]'
                                    on_press:
                                        NewAmmoDR.text=str(int(NewAmmoDR.text)-1)

                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                                Label:
                                    text:''
                